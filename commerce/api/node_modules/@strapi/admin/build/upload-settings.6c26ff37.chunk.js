"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[695],{67963:function(I,E,t){t.r(E),t.d(E,{SettingsPage:function(){return k},default:function(){return j}});var e=t(32735),m=t(99357),n=t(5636),s=t(88425),l=t(66456),h=t(72850),b=t(87933),p=t(9139),P=t(49372),z=t(41415),D=t(27649),R=t(27677),v=t(15335),a=t(5803),d=t(28356),r=t(17e3),o=t(96709),g=t(55721),x=t(89793),M=t.n(x),c=t(15503),S=i=>i,J=t(97889),U=t(3040),u=t.n(U);const B={isLoading:!0,isSubmiting:!1,initialData:{responsiveDimensions:!0,sizeOptimization:!0,autoOrientation:!1,videoPreview:!1},modifiedData:{responsiveDimensions:!0,sizeOptimization:!0,autoOrientation:!1,videoPreview:!1}};var K=(i,C)=>(0,J.default)(i,f=>{switch(C.type){case"CANCEL_CHANGES":{f.modifiedData=i.initialData;break}case"GET_DATA_SUCCEEDED":{f.isLoading=!1,f.initialData=C.data,f.modifiedData=C.data;break}case"ON_CHANGE":{u()(f,["modifiedData",...C.keys.split(".")],C.value);break}case"ON_SUBMIT":{f.isSubmiting=!0;break}case"SUBMIT_SUCCEEDED":{f.initialData=i.modifiedData,f.isSubmiting=!1;break}case"ON_SUBMIT_ERROR":{f.isSubmiting=!1;break}default:return i}}),y=t(93826),O=t(98399);const k=()=>{const{formatMessage:i}=(0,n.useIntl)(),{lockApp:C,unlockApp:f}=(0,s.useOverlayBlocker)(),$=(0,s.useNotification)();(0,s.useFocusWhenNavigate)();const[{initialData:N,isLoading:V,isSubmiting:F,modifiedData:H},Z]=(0,e.useReducer)(K,B,S),Y=(0,e.useRef)(!0);(0,e.useEffect)(()=>{const W=g.Z.CancelToken.source(),_=async()=>{try{const{data:{data:X}}=await c.be.get((0,c.IF)("settings"),{cancelToken:W.token});Z({type:"GET_DATA_SUCCEEDED",data:X})}catch(X){O.error(X)}};return Y.current&&_(),()=>{W.cancel("Operation canceled by the user."),Y.current=!1}},[]);const w=M()(N,H),q=async L=>{if(L.preventDefault(),!w){C(),Z({type:"ON_SUBMIT"});try{await c.be.put((0,c.IF)("settings"),H),Z({type:"SUBMIT_SUCCEEDED"}),$({type:"success",message:{id:"notification.form.success.fields"}})}catch(W){O.error(W),Z({type:"ON_SUBMIT_ERROR"})}f()}},Q=({target:{name:L,value:W}})=>{Z({type:"ON_CHANGE",keys:L,value:W})};return e.createElement(D.o,{tabIndex:-1},e.createElement(m.Helmet,{title:i({id:(0,c.OB)("page.title"),defaultMessage:"Settings - Media Libray"})}),e.createElement("form",{onSubmit:q},e.createElement(d.T,{title:i({id:(0,c.OB)("settings.header.label"),defaultMessage:"Media Library"}),primaryAction:e.createElement(z.z,{disabled:w,"data-testid":"save-button",loading:F,type:"submit",startIcon:e.createElement(l.Z,null),size:"S"},i({id:"global.save",defaultMessage:"Save"})),subtitle:i({id:(0,c.OB)("settings.sub-header.label"),defaultMessage:"Configure the settings for the Media Library"})}),e.createElement(r.D,null,V?e.createElement(s.LoadingIndicatorPage,null):e.createElement(o.A,null,e.createElement(R.K,{spacing:12},e.createElement(h.x,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},e.createElement(R.K,{spacing:4},e.createElement(b.k,null,e.createElement(P.Z,{variant:"delta",as:"h2"},i({id:(0,c.OB)("settings.blockTitle"),defaultMessage:"Asset management"}))),e.createElement(v.r,{gap:6},e.createElement(a.P,{col:6,s:12},e.createElement(p.s,{"aria-label":"responsiveDimensions","data-testid":"responsiveDimensions",checked:H.responsiveDimensions,hint:i({id:(0,c.OB)("settings.form.responsiveDimensions.description"),defaultMessage:"Enabling this option will generate multiple formats (small, medium and large) of the uploaded asset."}),label:i({id:(0,c.OB)("settings.form.responsiveDimensions.label"),defaultMessage:"Responsive friendly upload"}),name:"responsiveDimensions",offLabel:i({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:i({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:L=>{Q({target:{name:"responsiveDimensions",value:L.target.checked}})}})),e.createElement(a.P,{col:6,s:12},e.createElement(p.s,{"aria-label":"sizeOptimization","data-testid":"sizeOptimization",checked:H.sizeOptimization,hint:i({id:(0,c.OB)("settings.form.sizeOptimization.description"),defaultMessage:"Enabling this option will reduce the image size and slightly reduce its quality."}),label:i({id:(0,c.OB)("settings.form.sizeOptimization.label"),defaultMessage:"Size optimization"}),name:"sizeOptimization",offLabel:i({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:i({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:L=>{Q({target:{name:"sizeOptimization",value:L.target.checked}})}})),e.createElement(a.P,{col:6,s:12},e.createElement(p.s,{"aria-label":"autoOrientation","data-testid":"autoOrientation",checked:H.autoOrientation,hint:i({id:(0,c.OB)("settings.form.autoOrientation.description"),defaultMessage:"Enabling this option will automatically rotate the image according to EXIF orientation tag."}),label:i({id:(0,c.OB)("settings.form.autoOrientation.label"),defaultMessage:"Auto orientation"}),name:"autoOrientation",offLabel:i({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:i({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:L=>{Q({target:{name:"autoOrientation",value:L.target.checked}})}}))))))))))};var j=()=>e.createElement(s.CheckPagePermissions,{permissions:y.Z.settings},e.createElement(k,null))},17e3:function(I,E,t){t.d(E,{D:function(){return s}});var e=t(32735),m=t(60216),n=t(72850);const s=({children:l})=>e.createElement(n.x,{paddingLeft:10,paddingRight:10},l);s.propTypes={children:m.node.isRequired}},28356:function(I,E,t){t.d(E,{T:function(){return D}});var e=t(32735),m=t(83292),n=t(60216),s=t(49372),l=t(72850),h=t(87933);const b=a=>{const d=(0,e.useRef)(null),[r,o]=(0,e.useState)(!0),g=([x])=>{o(x.isIntersecting)};return(0,e.useEffect)(()=>{const x=d.current,M=new IntersectionObserver(g,a);return x&&M.observe(d.current),()=>{x&&M.disconnect()}},[d,a]),[d,r]};var p=t(81002);const P=(a,d)=>{const r=(0,p.useCallbackRef)(d);(0,e.useLayoutEffect)(()=>{const o=new ResizeObserver(r);return Array.isArray(a)?a.forEach(g=>{g.current&&o.observe(g.current)}):a.current&&o.observe(a.current),()=>{o.disconnect()}},[a,r])},z=()=>{const a=(0,e.useRef)(null),[d,r]=(0,e.useState)(null),[o,g]=b({root:null,rootMargin:"0px",threshold:0});return P(o,()=>{o.current&&r(o.current.getBoundingClientRect())}),(0,e.useEffect)(()=>{a.current&&r(a.current.getBoundingClientRect())},[a]),{containerRef:o,isVisible:g,baseHeaderLayoutRef:a,headerSize:d}},D=a=>{const{containerRef:d,isVisible:r,baseHeaderLayoutRef:o,headerSize:g}=z();return e.createElement(e.Fragment,null,e.createElement("div",{style:{height:g?.height},ref:d},r&&e.createElement(v,{ref:o,...a})),!r&&e.createElement(v,{...a,sticky:!0,width:g?.width}))};D.displayName="HeaderLayout";const R=(0,m.default)(l.x)`
  position: fixed;
  top: 0;
  right: 0;
  width: ${a=>a.width}px;
  z-index: 4;
  box-shadow: ${({theme:a})=>a.shadows.tableShadow};
`,v=e.forwardRef(({navigationAction:a,primaryAction:d,secondaryAction:r,subtitle:o,title:g,sticky:x,width:M,...c},T)=>{const S=typeof o=="string";return x?e.createElement(R,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,background:"neutral0",width:M,"data-strapi-header-sticky":!0},e.createElement(h.k,{justifyContent:"space-between"},e.createElement(h.k,null,a&&e.createElement(l.x,{paddingRight:3},a),e.createElement(l.x,null,e.createElement(s.Z,{variant:"beta",as:"h1",...c},g),S?e.createElement(s.Z,{variant:"pi",textColor:"neutral600"},o):o),r?e.createElement(l.x,{paddingLeft:4},r):null),e.createElement(h.k,null,d?e.createElement(l.x,{paddingLeft:2},d):void 0))):e.createElement(l.x,{ref:T,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:a?6:8,background:"neutral100","data-strapi-header":!0},a?e.createElement(l.x,{paddingBottom:2},a):null,e.createElement(h.k,{justifyContent:"space-between"},e.createElement(h.k,null,e.createElement(s.Z,{as:"h1",variant:"alpha",...c},g),r?e.createElement(l.x,{paddingLeft:4},r):null),d),S?e.createElement(s.Z,{variant:"epsilon",textColor:"neutral600",as:"p"},o):o)});v.displayName="BaseHeaderLayout",v.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0,sticky:!1,width:void 0},v.propTypes={navigationAction:n.node,primaryAction:n.node,secondaryAction:n.node,sticky:n.bool,subtitle:n.oneOfType([n.string,n.node]),title:n.string.isRequired,width:n.number},D.defaultProps={navigationAction:void 0,primaryAction:void 0,secondaryAction:void 0,subtitle:void 0},D.propTypes={navigationAction:n.node,primaryAction:n.node,secondaryAction:n.node,subtitle:n.oneOfType([n.string,n.node]),title:n.string.isRequired}},96709:function(I,E,t){t.d(E,{A:function(){return b}});var e=t(32735),m=t(60216),n=t(83292),s=t(72850);const l=(0,n.default)(s.x)`
  display: grid;
  grid-template-columns: ${({hasSideNav:p})=>p?"auto 1fr":"1fr"};
`,h=(0,n.default)(s.x)`
  overflow-x: hidden;
`,b=({sideNav:p,children:P})=>e.createElement(l,{hasSideNav:Boolean(p)},p,e.createElement(h,{paddingBottom:10},P));b.defaultProps={sideNav:void 0},b.propTypes={children:m.node.isRequired,sideNav:m.node}},27649:function(I,E,t){t.d(E,{o:function(){return l}});var e=t(32735),m=t(60216),n=t(83292);const s=n.default.main`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,l=({labelledBy:h,...b})=>{const p=h||"main-content-title";return e.createElement(s,{"aria-labelledby":p,id:"main-content",tabIndex:-1,...b})};l.defaultProps={labelledBy:void 0},l.propTypes={labelledBy:m.string}},7563:function(I,E,t){t.d(E,{A:function(){return R}});var e=t(74512),m=t(32735),n=t(83292),s=t(57269),l=t(72850),h=t(49372),b=t(87933),p=t(30350);const P=n.keyframes`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(359deg);
  }
`,z=n.default.div`
  animation: ${P} 2s infinite linear;
  will-change: transform;
`,D=(0,n.default)(b.k)`
  background: transparent;
  border: none;

  &[aria-disabled='true'] {
    pointer-events: none;
    svg path {
      fill: ${({theme:v})=>v.colors.neutral600};
    }
  }

  svg {
    display: flex;
    font-size: ${10/16}rem;
  }

  svg path {
    fill: ${({theme:v})=>v.colors.primary600};
  }

  ${p.BF}
`,R=m.forwardRef(({children:v,startIcon:a,endIcon:d,onClick:r,disabled:o=!1,loading:g=!1,...x},M)=>{const c=r&&!o?r:void 0,T=o||g;return(0,e.jsxs)(D,{ref:M,"aria-disabled":T,onClick:c,as:"button",type:"button",...x,children:[(a||g)&&(0,e.jsx)(l.x,{as:"span",paddingRight:2,"aria-hidden":!0,children:g?(0,e.jsx)(z,{children:(0,e.jsx)(s.Loader,{})}):a}),(0,e.jsx)(h.Z,{variant:"pi",textColor:T?"neutral600":"primary600",children:v}),d&&(0,e.jsx)(l.x,{as:"span",paddingLeft:2,"aria-hidden":!0,children:d})]})});R.displayName="TextButton"},9139:function(I,E,t){t.d(E,{s:function(){return U}});var e=t(32735),m=t(83292),n=t(60216),s=t(78542),l=t(59002),h=t(87107),b=t(76437),p=t(67014),P=t(47851),z=t(27677),D=t(87933),R=t(7563),v=t(30350),a=t(49372),d=t(3685),r=t(72850),o=t(76144);const g=m.default.label`
  position: relative;
  display: inline-block;
  z-index: 0;
  width: 100%;
`,x=(0,m.default)(r.x)`
  cursor: ${({disabled:u})=>u?"not-allowed":void 0};
  // Masks the background of each value
  overflow: hidden;
  flex-wrap: wrap;

  ${(0,v.k3)()}
`,M=(0,m.default)(D.k).attrs({hasRadius:!0})`
  background-color: ${({theme:u,checked:B,disabled:A})=>B?A?u.colors.neutral200:u.colors.neutral0:"transparent"};
  border: 1px solid
    ${({theme:u,checked:B,disabled:A})=>B&&B!==null?A?u.colors.neutral300:u.colors.neutral200:A?u.colors.neutral150:u.colors.neutral100};
  position: relative;
  user-select: none;
  z-index: 2;
  flex: 1 1 50%;
  /**
    We declare the defined value because we want the height of the input when 
    the values are in a row to be 40px. But defining a height on the label
    would break the input when it wraps.
  */
  padding-top: ${({size:u})=>`${u==="S"?"2px":"6px"}`};
  padding-bottom: ${({size:u})=>`${u==="S"?"2px":"6px"}`};
`,c=m.default.input`
  height: 100%;
  left: 0;
  opacity: 0;
  position: absolute;
  top: 0;
  z-index: 1;
  width: 100%;
`,T=e.forwardRef(({size:u,onLabel:B,offLabel:A,children:K,checked:y,disabled:O,onChange:k,...G},j)=>{const{name:i,required:C}=(0,o.U)(),f="neutral600";let $=!y&&y!==null?"danger700":f,N=y?"primary600":f;const V=F=>{O||k(F)};return e.createElement(g,null,e.createElement(d.T,null,K),e.createElement(x,{hasRadius:!0,disabled:O,padding:1,display:"flex",background:O?"neutral150":"neutral100",borderStyle:"solid",borderWidth:"1px",borderColor:"neutral200"},e.createElement(M,{size:u,paddingLeft:3,paddingRight:3,justifyContent:"center",alignItems:"center","aria-hidden":!0,checked:y===null?!1:!y,disabled:O},e.createElement(a.Z,{variant:"pi",fontWeight:"bold",textTransform:"uppercase",textColor:O?"neutral700":$},A)),e.createElement(M,{size:u,paddingLeft:3,paddingRight:3,justifyContent:"center",alignItems:"center","aria-hidden":!0,checked:y===null?!1:y,disabled:O},e.createElement(a.Z,{variant:"pi",fontWeight:"bold",textTransform:"uppercase",textColor:O?"neutral700":N},B)),e.createElement(c,{type:"checkbox","aria-disabled":O,onChange:F=>V(F),name:i,ref:j,"aria-required":C,...G,checked:!(y===null||!y)})))});T.displayName="ToggleCheckbox",T.defaultProps={disabled:!1,checked:!1,onChange:void 0,size:"M"},T.propTypes={checked:n.bool,children:n.string.isRequired,disabled:n.bool,offLabel:n.string.isRequired,onChange:n.func,onLabel:n.string.isRequired,size:n.oneOf(Object.keys(s.J.input))};const S=(0,m.default)(h.g)`
  max-width: 320px;
`,J=(0,m.default)(R.A)`
  align-self: flex-end;
  margin-left: auto;
`,U=({disabled:u,size:B,error:A,hint:K,label:y,name:O,labelAction:k,required:G,id:j,onClear:i,clearLabel:C,checked:f,...$})=>{const N=(0,l.M)("toggleinput",j);return e.createElement(S,{name:O,hint:K,error:A,id:N,required:G},e.createElement(z.K,{spacing:1},e.createElement(D.k,null,e.createElement(b.Q,{action:k},y),C&&i&&f!==null&&!u&&e.createElement(J,{onClick:i},C)),e.createElement(T,{id:N,size:B,checked:f,disabled:u,...$},y),e.createElement(p.J,null),e.createElement(P.c,null)))};U.displayName="ToggleInput",U.defaultProps={checked:!1,clearLabel:void 0,disabled:!1,error:void 0,hint:void 0,id:void 0,label:"",labelAction:void 0,name:"",onClear:void 0,required:!1,size:"M"},U.propTypes={checked:n.bool,clearLabel:n.string,disabled:n.bool,error:n.string,hint:n.oneOfType([n.string,n.node,n.arrayOf(n.node)]),id:n.string,label:n.string,labelAction:n.node,name:n.string,onClear:n.func,required:n.bool,size:n.oneOf(Object.keys(s.J.input))}}}]);
