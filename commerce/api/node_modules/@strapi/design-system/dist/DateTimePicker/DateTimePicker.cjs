"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const p=require("react"),E=require("../Stack/Stack.cjs"),v=require("../DatePicker/DatePicker.cjs"),C=require("../TimePicker/TimePicker.cjs"),R=require("../Field/Field.cjs"),x=require("../Field/FieldLabel.cjs");require("../Field/FieldInput.cjs");const A=require("../Field/FieldHint.cjs"),O=require("../Field/FieldError.cjs");require("../Field/FieldContext.cjs");require("../Field/FieldAction.cjs");const q=require("../helpers/useId.cjs"),$=require("./parseDate.cjs"),H=require("./DateTimePickerProps.cjs"),z=i=>i&&typeof i=="object"&&"default"in i?i:{default:i},a=z(p),F=({ariaLabel:i,clearLabel:P,disabled:T,error:f,hint:y,label:o,labelAction:M,onChange:s,onClear:m,name:g,required:D,selectButtonTitle:I,size:j,step:b,value:c,...S})=>{const d=$.parseDate(c),[r,n]=p.useState(d),[u,l]=p.useState(d?`${d.getHours()}:${d.getMinutes()}:${d.getSeconds()}`:null),h=e=>{n(e);let t;u?(t=new Date(e),t.setHours(u.split(":")[0]),t.setMinutes(u.split(":")[1])):(t=new Date(e),l(`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()}`)),s&&s(t)},w=e=>{l(e);const t=r?new Date(r):new Date;t.setHours(e.split(":")[0]),t.setMinutes(e.split(":")[1]),r||n(t),s&&s(t)},_=()=>{n(void 0),l(void 0),m()},L=()=>{l(void 0);let e;r&&(e=new Date(r),e.setHours("00"),e.setMinutes("00")),s&&s(e)};p.useEffect(()=>{if(c&&+c!=+r){const e=$.parseDate(c);n(e),l(e?`${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}`:null)}else c||(n(void 0),l(void 0))},[c,r]);const k=q.useId("datetime-label",S?.id),V=q.useId("datetimepicker");return a.default.createElement(R.Field,{name:g,role:"group",id:k,"aria-labelledby":k,hint:y,error:f,required:D},a.default.createElement(E.Stack,{spacing:1},o&&a.default.createElement(x.FieldLabel,{action:M},o),a.default.createElement(E.Stack,{horizontal:!0,spacing:2},a.default.createElement(v.DatePicker,{"data-testid":"datetimepicker-date",id:k,name:g,ariaLabel:o||i,error:typeof f=="string",selectedDate:r,selectedDateLabel:e=>`Date picker, current is ${e}`,onChange:h,required:D,size:j,onClear:m&&_,clearLabel:P,disabled:T,...S}),a.default.createElement(C.TimePicker,{"data-testid":"datetimepicker-time",size:j,"aria-label":o||i,error:typeof f=="string",value:u,onChange:w,onClear:m&&L,clearLabel:P,required:D,selectButtonTitle:I,disabled:T,step:b})),a.default.createElement(A.FieldHint,null),a.default.createElement(O.FieldError,{id:V})))};F.defaultProps=H.dateTimePickerDefaultProps;F.propTypes=H.dateTimePickerPropTypes;exports.DateTimePicker=F;
