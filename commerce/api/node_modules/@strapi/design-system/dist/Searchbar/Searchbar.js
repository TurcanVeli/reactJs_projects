import r, { forwardRef as y, useRef as $ } from "react";
import t from "prop-types";
import o from "styled-components";
import { Search as S, Cross as v } from "@strapi/icons";
import { sizes as C } from "../themes/sizes.js";
import { Field as F } from "../Field/Field.js";
import { FieldLabel as w } from "../Field/FieldLabel.js";
import { InputWrapper as a, FieldInput as z } from "../Field/FieldInput.js";
import "../Field/FieldContext.js";
import "../Typography/Typography.js";
import { FieldAction as q } from "../Field/FieldAction.js";
import { VisuallyHidden as x } from "../VisuallyHidden/VisuallyHidden.js";
import { inputFocusStyle as I } from "../themes/utils.js";
import { Flex as s } from "../Flex/Flex.js";
const W = o(s)`
  font-size: 0.5rem;
  svg path {
    fill: ${({ theme: e }) => e.colors.neutral400};
  }
`, c = o(s)`
  font-size: 0.8rem;

  svg path {
    fill: ${({ theme: e }) => e.colors.neutral800};
  }
`, A = o.div`
  border-radius: ${({ theme: e }) => e.borderRadius};
  box-shadow: ${({ theme: e }) => e.shadows.filterShadow};

  &:focus-within {
    ${c} {
      svg path {
        fill: ${({ theme: e }) => e.colors.primary600};
      }
    }
  }

  ${a} {
    border: 1px solid transparent;
  }

  ${I(a)}
`, l = y(({ name: e, size: m, children: p, value: i, onClear: u, clearLabel: d, ...f }, h) => {
  const n = $(null), b = i.length > 0, E = (g) => {
    u(g), n.current.focus();
  }, R = h || n;
  return /* @__PURE__ */ r.createElement(A, null, /* @__PURE__ */ r.createElement(F, {
    name: e
  }, /* @__PURE__ */ r.createElement(x, null, /* @__PURE__ */ r.createElement(w, null, p)), /* @__PURE__ */ r.createElement(z, {
    ref: R,
    value: i,
    startAction: /* @__PURE__ */ r.createElement(c, null, /* @__PURE__ */ r.createElement(S, {
      "aria-hidden": !0
    })),
    size: m,
    endAction: b ? /* @__PURE__ */ r.createElement(q, {
      label: d,
      onClick: E
    }, /* @__PURE__ */ r.createElement(W, null, /* @__PURE__ */ r.createElement(v, null))) : void 0,
    ...f
  })));
});
l.displayName = "Searchbar";
l.defaultProps = {
  value: "",
  size: "M"
};
l.propTypes = {
  children: t.node.isRequired,
  clearLabel: t.string.isRequired,
  name: t.string.isRequired,
  onClear: t.func.isRequired,
  size: t.oneOf(Object.keys(C.input)),
  value: t.string
};
export {
  l as Searchbar
};
